# Цели.
Минимально-делимый geohash является достаточно большим участком земли, его невозможно поделить по вертикали. В реале же возможны ситуации, когда на одном geohash-е построено здание, в котором много аппартаментов, например многоэтажный кондоминиум. Пользователям необходимо иметь возможность владения аппартаментами с предоставлением соответствующей доли репутации, которой они смогут распоряжаться точно так же, как если бы это был целый Space токен.

# Пользовательская история.

* Пользователь A имеет в собственности Space токен, залоговая стоимость которого составляет 2500 GALT.
	* 2500 репутации принадлежат пользователю А
* Пользователь B создает контракт совместной собственности и просит друга (A) -владельца перечислить туда Space токен
	* никаких изменений в репутации
	* Работа с контрактом заблокирована - ожидается поступление Space токена
* Пользователь A перечисляет свой Space токен на контракт
	* Работа с контрактом активируется.
	* 2500 репутации принадлежат адресу контракта
* Пользователь C вносит залог 750 GALT
	* 750 репутации принадлежат пользователю C
	* 1750 репутации принадлежат контрату
* Пользователь D вносит залог 1500 GALT
	* 750 репутации принадлежат пользователю С
	* 1500 репутации принадлежат пользователю D
	* 250 репутации принадлежат контракту
* Создается голосование за вывод токена на адрес E
	* пользователь C голосует против
	* пользователь D голосует за
	* вывод токена отклоняется, т.к. не набрано 100% активных голосов
* Создается голосование за вывод токена на адрес F
	* пользователь C голосует за
	* пользователь D голосует за
	* Space токен передается на адрес F
	* пользователь C получает 750 GALT на свой адрес и его репутация в рамках контракта обнуляется
	* пользователь D получает 1500 GALT на свой адрес и его репутация в рамках контракта обнуляется
	* работа с контрактом блокируется

# Спецификация
## Создание контракта
* Создать контракт может любой пользователь, он не будет обладать какими-либо правами по сравнению с другими участникам.
* Перевести токен на контракт может любой владелец Space токена.
* При попытке перевода второго токена на контракт транзакция отменяется.
* Созданный контракт является не активным, пока на него не будет передан один space токен.
* После перевода токена, 100% его репутации принадлежит контракту. По сути это будет не-активная репутация, но в кастомных реализация контрактов совместной собственности остается возможность использования этой репутации в любых целях. Это может быть 
    * Распределение 100% репутации между любыми адресами в любом соотношении.
    * Голосование за кого-либо на выборах.

## Вход участников
* Минимальный депозит задается в контракте и по умолчанию равен 1GALT
* Сумма всех депозитов при 100% распределении репутации должна быть равна залоговой стоимости (репутации) самого токена.
* Максимальное кол-во участников 50 (как в gnosis). Большое кол-во участников может заморозить контракт без возможности взаимодействия с ним.

## Изменение доли
* Пользователь может в любой момент как увеличить так и уменьшить свою долю.

## Голосование
* При голосовании учитывается размер депозита конкретного пользователя.
* Если пользователь уменьшает или увеличивает свою долю в тот момент, когда идут какие-либо голосования, в них так же перерасчитывается доля пользователя.

## Управление токеном
* Какие-либо операции с токеном возможны только при 100% согласии всех участников мультисига (вот тут надо подумать, может использовать другие схемы. Тот же gnosis при создании контракта принимает переменную, определяющую кол-во голосов, требуемых для принятия либо отклонения решения).

## Выход участников
* Любой участник может выйти и забрать свой депозит без согласия остальных.
* Репутация равная его депозиту передается от выходящего участника на адрес контракта.

## Удаление контракта
* Вывести SpaceToken токен возможно лишь совместным голосованием, согласие всех участников должно быть 100%.
* При выводе токена:
    * репутация ото всех участников передается сначала на контракт
    * потом мы убеждаемся, что отозванная репутация равна репутации токена (мало ли у кого не забрали)
    * Только после этого вся репутация вместе с токеном переходит адресу, на который выводится токен

* Контракт без токена бесполезен - его можно удалить а можно и оставить.

# Технические детали
* Залоги пользователей отношением адрес => залог в GALT (mapping(address => number))
* На каждое изменение пользовательского залога происходит соответствующее изменение в контрактах Loacal Reputation и Global Reputation
* Мы не можем хранить список пользователей владельцев участка, это потребует добавления цикла. Поэтому у нас не будет функционала отображения всех пользователей, которые учавствуют в контракте. (аналогичный функционал в ERC20 токене)
