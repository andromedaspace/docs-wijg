# Sprint 1

## Web3 Application (21 час)

### Действия
 - Отображение на карте
   - При наведении курсором отображать координату в формате Геохеш и GPS, широта, долгота, 45 мин
 - Ввод данных по заявке 
   - Ввод текстовых данных по заявке, 15 мин
   - Указание контура в текстовых полях, сделано
     - Возможность вместо геохешей указывать координаты в формате Google Maps, 60 мин
   - Демонстрация апроксимированных геохешей по контурам, сделано
   - Отправка транзакции на создание заявки, сделано
   - Отправка нескольких транзакций на добавление геохешей группами, 240 мин
     - Формировать список последовательно с соседями и сторонами смежных с соседними (список порядка добавления в упаковку)
   - Отправка транзакции на изменение статуса заявки на `Готов к проверке`, 15 мин
 - Мои заявки
   - Отображение всех поданных заявок пользователям, 30 мин
   - Возможность фильтрации по статусам, 30 мин
   - При выборе заявки - отображение упаковки указанной в заявке на карте., 30 мин
   - По каждой заявке кнопка `Добавить геохеш` для заявок со статусом `Новая` при нажатии появляется поле для ввода геохеша или нескольких геохешей с кнопкой `Добавить`
     - Автоматическое определение соседа со стороной смежной с соседом для добавления в упаковку, 60 мин
     - Подсвечивание на карте добавляемых геохешей, 30 мин
     - Подсвечивание некорректно указанных геохешей, 60 мин
   - По каждой заявке кнопка `Разобрать упаковку` нажатие которой вызывает создание серии транзакций по удалению геохешей из упаковки пока счетчик геохешей упаковки не станет равен нулю, 120 мин 
   - По каждой заявке кнопка `Проверить геохеши упаковки` Есть ли геохеши, которые входят в контур но не вошли в упаковку. 120 мин
     - Показывать предупреждение пользователю с кнопкой Добавить недостающие геохеши, которая генерирует одну или несколько транзакций на добавление геохешей группами
 - Мои участки
   - Отображает список всех участков (геохешей и упаковок) с отображением на карте, должно подствечиваться при выборе., 30 мин
   - Для каждой упаковки отображать кнопку Разобрать упаковку при нажатии создается серия транзакций по полному разбору упаковки., 30 мин
   - Для каждой упаковки отображать кнопку Добавить геохеши, при нажатии на кнопку реализуется тот же самый функционал что и при добавлении геохешей в упаковку в заявку, за исключением того что владельцем должен быть пользователь., 30 мин
   - Для каждого геохеша отображается кнопка `Разобрать` и кнопка `Собрать`, 30 мин
   - Отдельная кнопка `Создать упаковку`
     - Автоматическая фильтрация при нажатии Создать упаковку на показ только геохешей, 15 мин
     - Возможность выбора геохешей чекбоксами и подсвечивание выбранных на карте, 15 мин
     - После выбора каждого геохеша проверять и предупреждать пользователя в случае невозможности обьединения в упаковку, 15 мин
     - Кнопка Подтвердить создание упаковки, которая создает серию транзакций по добавлению геохешей в упаковку, 15 мин
   - Кнопка `Отправить токен участка` под каждым участком. При нажатии указывается адрес и кнопка `Отправить`, 15 мин
 - Заявки на рассмотрение
   - Отображать список всех заявок со всеми полями, со статусом `Готово к рассмотрению`, если код страны в заявке равен коду страны Валидатора.
   - Отображать кнопку `Получить заявку` для заявок со статусом `Готово к рассмотрению`, 15 мин
   - Отображать кнопку только у валидаторов, 15 мин
   - Отображать список всех заявок со всеми полями, со статусом `На рассмотрении`, если назначенный валидатор = текущему адресу, 45 мин
   - Для каждой заявки со статусом `На рассмотрении` отображать кнопку `Проверить`. При нажатии кнопки `Проверить` отображаются поля, что пользователь указывал в заявке., 15 мин
   - Кнопка `Проверить данные` и `Утвердить заявку`, которая показывается после успешной проверки данных., 30 мин
   - Кнопка `Отклонить заявку`, 15 мин
   - Кнопка `Вернуть заявку`, 15 мин
   - Кнопка `Разобрать заявку` для заявок со статусом `Отклонена`, 15 мин
   - Кнопка `Получить награду`, 45 мин
     - Отображается для валидаторов для заявок со статусом `Утверждена` и заявок со статусом `Отклонена` если в упаковке в указанной заявке нет геохешей.
     - Отображается для Owner контракта GaltSpace если стоит флаг выплачено вознаграждение валидатору.
     

## GaltToken
 - Все готово

## SpaceToken (8 часов 20 минут)

### Методы
  - Разработка метода [encode](../ru/contracts/SpaceToken.md#encode), нужно разработать
    - из 5-бит пакетов нереализовано 
      - написать unit test, 15 минут
    - из 8-бит пакетов вообще нереализовано, 120 мин
  - Разработка метода [decode](../ru/contracts/SpaceToken.md#decode), нужно разработать
    - из 5-бит пакетов нереализовано
      - написать unit test, 15 минут
    - из 8-бит пакетов вообще нереализовано, 120 мин
  - Разработка метода mint (выпуск токена), готово на 90%
    - Нужно опеределить права (роли) на вызов метода mint, 15 мин
    - Написать код на проверку прав метода mint, 60 мин
  - Перенести метод mintPack в контракт SplitMerge, Выпилить в будущем
  - Перенести метод swapToPack в контракт SplitMerge, Выпилить в будущем
    - Убрать импорт контракта SplitMerge
  - Входят в стандарт и должны быть включены методы из контрактов:
    - ERC721Token, реализовано
    - Ownable, реализовано
    - Initializable, реализовано
  - generatePackTokenId
    - Написать Unit test, 10 мин
  - isPack
    - Написать Unit test, 10 мин
  - isGeohash
    - Написать Unit test, 10 мин
  - tokenIdToGeohash
    - Написать Unit test, 10 мин
  - geohashToTokenId
    - Написать Unit test, 10 мин
  - setTokenURI
    - Нужно опеределить права на вызов метода setTokenURI, 15 мин
    - Написать код на проверку прав метода setTokenURI, 30 мин
  - burn
    - Нужно опеределить права на вызов метода burn, 15 мин
    - Написать код на проверку прав метода burn, 30 мин
  - canTransfer
    - Написать Unit test, 15 мин

## PlotManager (10 часов 45 минут)

### Методы
 - Наследование и импорт стандартных контрактов (Initializable, Ownable)
   - Проверить правильность наследования и импорта, (???)
 - Метод initialize
   - Определить переменные, 15 мин
     - Размер комиссии за создание заявки
     - Проценты комиссии за проверку заявки, получаемый Galt Space и Валидатором
     - address SpaceToken
     - address SplitMerge
 - Метод addValidator
   - Покрыть тестами, 15 мин
 - Метод removeValidator
   - Покрыть тестами, 15 мин
 - Метод applyForPlotOwnership
   - Перевод X эфиров в контракт
     - Написать тест, 15 мин
   - Выполнять mint одного geohash или использование готового, если он принадлежит контракту PlotManager, mint упаковки, обмен одного geohash на упаковку с записью во все мапинги SplitMerge и созданием заявки со статусом Новая - одной транзакцией, 90 мин
     - mint одного geohash на контракт PlotManager
     - mint упаковки на контракт SplitMerge
     - обмен одного geohash на упаковку
     - запись во все мапинги SplitMerge
     - создание заявки со статусом Новая
 - Метод addGeohashesToApplication, 60 мин
   - Проверка наличия конкрентных токенов на контракте PlotManager
   - mint geohash в случае отсутствия
   - Добавление geohash в упаковку
   - Проверка статуса заявки
 - Метод submitApplication, 15 мин
   - Изменение статуса заявки
   - Проверка статуса заявки
 - Метод removeGeohashFromApplication
   - Проверка если в упаковке нет геохешей то изменить статус заявки на Неактивная, 15 мин
   - Вызов метода контракта SplitMerge, который передает токен geohash от контракта SplitMerge контракту PlotManager и меняет маппинг geohash -> упаковка для заявки в статусе Новая, 45 мин
 - Метод removeGeohashesFromApplication, 30 мин
   - Вызов в цикле removeGeohashFromApplication
 - Метод approveApplication, 60 мин
   - Проверить статус заявки
   - Получить на входе hash
   - Сравнить hashes
   - Передать токен упаковки заявителю
   - Изменить статус заявки на `Утверждена`
 - Метод revertApplication, 15 мин
   - Изменить статус заявки на `Новая`
 - Метод rejectApplication, 15 мин
   - Изменить статус заявки на `Отказ`
 - Метод claimValidatorReward, 90 мин
   - для заявок со статусом утверждена для перечисления эфиров валидаторам без проверок
   - для заявок со статусом `Отказ` проверка для упаковки указанной в заявке, что количество `geohash` в упаковке равно нулю 
 - Метод claimGaltSpaceReward, 90 мин
   - Если стоит флаг что валидатор получил вознаграждение, то `GaltSpace` может получить вознаграждение
 - Метод getApplicationById, 15 мин
   - Добавить недостающие поля
 - Метод claimApplication, 30 мин
   - Проверка что код страны и код города в заявке совпадает в данными валидатора
   - Записать валидатора в заявку и изменить статус на Назначено на валидатора
 - Метод revokeValidatorFromApplication, 30 мин
   - Владелец контракта убирает валидатора и меняет статус заявки на Готово к рассмотрению
   
 
## SplitMerge (10 часов 45 минут)

### Методы
 - Метод mintGeohash
   - Выполнение проверки может вызывать только PlotManager и владелец контракта, реализовано.
   - Написать тест, 15 мин
 - Метод mintPackage
   - Написать тест, в `initPackage`
 - Метод initPackage
   - Проверка, что geohash принадлежит тому кто вызывает метод, реализовано.
   - Написать тест, 15 мин
 - Метод addGeohashToPackage
   - Проверка, что сосед указанный в аргументе по указанной стороне находится в той же упаковке. - мин
   - Проверка, что geohash принадлежит владельцу упаковки, 15 мин
   - Написать тест, 30 мин
 - Метод addGeohashToPackageUnsafe
   - Написать тест, в `initPackage` & `addGeohashToPackage` (?)
 - Метод addMultipleGeohashesToPackage
   - Написать тест, 15 мин
 - Метод removeGeohashFromPackageUnsafe
   - Выполнение проверки может вызывать только PlotManager и владелец контракта, реализовано., 45 мин
   - Написать тест, 15 мин
 - Метод removeGeohashFromPackage
   - Проверка, что по указанным в аргументах двум смежным сторонам отсутствуют geohashes принадлежащие той же упаковке., - мин
   - Написать тест, 15 мин
 - Метод splitGeohash, 240 мин
   - Проверка, что все дочерние `geohashes` или отсутствуют или принадлежат `SplitMerge`
   - Написать код с проверкой на `Ownership`
   - Написать тест
 - Метод mergeGeohash, 240 мин
   - Проверка, что родительский не существует или принадлежит `SplitMerge`
   - Написать код с проверкой на `Ownership`
   - Написать тест
 
 

## TerritoryCrowdsale

## SpaceAuctionPack

## SPACEAuctionRegistry

## GALTGenesisRegistry

## Explorer Testnet


## Solidity Telegram Bot
 - Web3 wrapper
   - Портирование методов управления ETH (ETH.ts), раздача эфира, отправка эфира, получение балансов
     - Метод requestEthers, реализовано
       - Написать тест, 15 мин
     - Метод send
       - Написать код, 45 мин
       - Написать тест, 15 мин
     - Метод balanceOf, реализовано
       - Написать тест, 15 мин
   - Кеширование данных и трансляция событий в Redis
     - Менеджер подписок на события
       - Написать документацию, 30 мин
       - Написать код, (???) мин
       - Написать тест, (???) мин
     - Менеджер кеширования
       - Написать документацию, 30 мин
       - Написать код, (???) мин
       - Написать тест, (???) мин
     - Транслятор событий
       - Написать документацию, 30 мин
       - Написать код, (???) мин
       - Написать тест, (???) мин
   - GaltToken
     - Метод totalSupply
       - Написать код, 15 мин
       - Написать тест, 15 мин
     - Метод balanceOf
       - Написать код, 30 мин
       - Написать тест, 15 мин
     - Метод transfer
       - Написать код, 15 мин
       - Написать тест, 15 мин
     - Метод transferFrom
       - Написать код, 15 мин
       - Написать тест, 15 мин
     - Метод allowance
       - Написать код, 15 мин
       - Написать тест, 15 мин
     - Метод approve
       - Написать код, 15 мин
       - Написать тест, 15 мин
     - Метод mint
       - Написать код, 15 мин
       - Написать тест, 15 мин
     - Метод burn
       - Написать код, 15 мин
       - Написать тест, 15 мин
   - SpaceToken
     - Метод totalSupply
       - Написать код, 15 мин
       - Написать тест, 15 мин
     - Метод balanceOf
       - Написать код, 15 мин
       - Написать тест, 15 мин
     - Метод ownerOf, получение владельца токена
       - Написать код, 45 мин
       - Написать тест, 15 мин
     - Метод transfer ???
       - Написать код
       - Написать тест
     - Метод transferFrom
       - Написать код, 45 мин
       - Написать тест, 15 мин
     - Метод approve
       - Написать код, 15 мин
       - Написать тест, 15 мин
     - Метод mint
       - Написать код, 15 мин
       - Написать тест, 15 мин
     - Метод burn
       - Написать код, 15 мин
       - Написать тест, 15 мин
     - Метод getApproved
       - Написать код, 15 мин
       - Написать тест, 15 мин
     - Метод setApprovedForAll
       - Написать код, 15 мин
       - Написать тест, 15 мин
     - Метод isApprovedForAll
       - Написать код, 15 мин
       - Написать тест, 15 мин
     - Метод isApprovedOrOwner
       - Написать код, 15 мин
       - Написать тест, 15 мин
     - Метод getHeight
       - Написать код, 15 мин
       - Написать тест, 15 мин
     - Метод getDepth
       - Написать код, 15 мин
       - Написать тест, 15 мин
     - Метод setLandSpace
       - Написать код, 15 мин
       - Написать тест, 15 мин
   - SplitMerge (????)
     - Метод mintGeohash
       - Написать код, 15 мин
       - Написать тест, 15 мин
     - Метод mintPackage
       - Написать код, 15 мин
       - Написать тест, 15 мин
     - Метод initPackage
       - Написать код, 15 мин
       - Написать тест, 15 мин
     - Метод addGeohashToPackage
       - Написать код, 10 мин
       - Написать тест, 10 мин
     - Метод addGeohashToPackageUnsafe
       - Написать код, 10 мин
       - Написать тест, 10 мин
     - Метод addMultipleGeohashesToPackage
       - Написать код, 10 мин
       - Написать тест, 10 мин
     - Метод removeGeohashFromPackageUnsafe
       - Написать код, 10 мин
       - Написать тест, 10 мин
     - Метод removeGeohashFromPackage
       - Написать код, 10 мин
       - Написать тест, 10 мин
     - Метод splitGeohash
       - Написать код, 10 мин
       - Написать тест, 10 мин
     - Метод mergeGeohash
       - Написать код, 10 мин
       - Написать тест, 10 мин

## TypeScript Telegram Bot
 - Bintan
 - Маркетинговый бот (общего назначения)

## Технические задачи
 - Разобраться с проблемой контрактами Proxy, 120 мин
 - Тест Proxy
   - Подготовка тестовых данных на примере контракта SpaceToken, 30 мин
   - Апгрейд этого контракта с новым функционалом, 120 мин
   - Проверка целостности данных и работы нового функционала, 60 мин

## Изменения:
 - [Изменение данных по заявке](https://github.com/galtspace/galtproject-docs/blob/master/ru/contracts/PlotManager.md#%D0%A1%D1%86%D0%B5%D0%BD%D0%B0%D1%80%D0%B8%D0%B9-3-%D0%98%D0%B7%D0%BC%D0%B5%D0%BD%D0%B5%D0%BD%D0%B8%D0%B5-%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85-%D0%BF%D0%BE-%D0%B7%D0%B0%D1%8F%D0%B2%D0%BA%D0%B5)
 - [Добавление Геохешей в заявку и удаление Геохешей из заявки](https://github.com/galtspace/galtproject-docs/blob/master/ru/contracts/PlotManager.md#%D0%A1%D1%86%D0%B5%D0%BD%D0%B0%D1%80%D0%B8%D0%B9-2---%D0%94%D0%BE%D0%B1%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5-%D0%93%D0%B5%D0%BE%D1%85%D0%B5%D1%88%D0%B5%D0%B9-%D0%B2-%D0%B7%D0%B0%D1%8F%D0%B2%D0%BA%D1%83-%D0%B8-%D1%83%D0%B4%D0%B0%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5-%D0%93%D0%B5%D0%BE%D1%85%D0%B5%D1%88%D0%B5%D0%B9-%D0%B8%D0%B7-%D0%B7%D0%B0%D1%8F%D0%B2%D0%BA%D0%B8)
