# Sprint 5

## Web3 Application, 20 часов
  - Подготовить приложение для мультиязычности
    - **Сделано** Создать и подгружать JSON ru файл со всеми русскими именами и текстами, 30 мин
    - **Сделано** Создать плагин для получения текста по имени, 120 мин
    - **Сделано** Создать фильтр для получение текста по имени из шаблонов VUE, 30 мин
    - **Сделано** Использовать шаблонизатор для вставки переменных в тексты, 60 мин
    - **Сделано** Перенести все тексты из приложения в JSON файл, 120 мин
    - **Сделано** Передавать переменные вместе с текстами для использования в шаблонах, 60 мин
  - Перевести Frontend на новую версию контрактов PlotManager и Validators
    - **Сделано** Получение и отображение списка ролей валидатора, 30 мин
    - **Сделано** Получение списка ролей заявки, 30 мин
    - **Сделано** Получение статуса по каждой из ролей в заявке:(одобрена или не одобрена), 30 мин
    - **Сделано** Указание роли валидатором при назначении заявки, 30 мин
    - **Сделано** Подача заявки GALT или ETH (селектор и предупреждение с размером комиссии), 60 мин
    - **Сделано** Возможность установки большей комиссии, 15 мин
    - **Сделано** Редактирование деталей завявки Апликантом при создании заявки и возвращении от валидатора, 60 мин
    - Админка с указанием ролей и долей в эфирах и галтах по типу заявки
      - **Сделано** Отображение таблички, 120 мин
      - **Сделано** Редактирование таблички, 60 мин
      - **Сделано** Проверка того что сумма всех процентов - 100, предупреждение если не так, 30 мин
      - **Сделано** Отправка всех данных таблички одной транзанкцией, 30 мин
    - **Сделано** Получение списка ролей по типу заявки(тип указан в PlotManager), 30 мин
    - **Сделано** Проверить на изменение полей заявки, 30 мин
    - **Сделано** Возврат оплаченного залога заявителю по заявке в статусе Утвержденна, либо в статусе Разобрана заявителем, 60 мин
    - **Сделано** Отправка оплаченного залога валидатору по итогам разбора заявки, 30 мин
  - Интерфейс SpaceDex
    - **Сделано** Страница SpaceDex: список участков с картой рядом, 30 мин
    - **Сделано** Список доступных Space токенов для покупки с ценами, 60 мин
    - **Сделано** Кнопка для покупки Space токена за GALT, 30 мин
    - **Сделано** Список доступных Space токенов для продажи с ценами, 60 мин
      - Проверка и фильтрация Space токенов на возможность продажи(установлена цена и одобрен)
    - **Сделано** Кнопка для продажи Space токена за GALT, 30 мин
    
## Контракты: Евгений, 10 часов
  - SpaceDex
    - **Сделано** SetPlotCustodianManagement, 30 мин
      - Установка адреса контракта для получения цены за Space токен и статуса доступности для продажи
    - **Сделано** ExchangeSpaceToGalt, 90 мин
      - Получение цены Space токена из PlotCustodianManagement
      - Передача Space токена участка контракту PlotCustodianManagement, а Galt токенов пользователю
      - Запись Space токена в динамический массив
    - **Сделано** ExchangeGaltToSpace, 90 мин
      - Получение цены Space токена из PlotCustodianManagement
      - Передача Galt токенов контракту PlotCustodianManagement, а Space токена пользователю
      - Удаление Space токена из динамического массива
    - **Сделано** Кешированние суммы всех цен Space токенов для вычитания их GaltDex, 60 мин
    - **Сделано** Заглушка GetSpacePrice с постоянной ценой, 10 мин
    - **Сделано** Заглушка AvailableForSell с постоянным true, 10 мин
    - **Сделано** Написание тестов, 120 мин
  - GaltDex
    - **Сделано** SetSpaceDex, 30 мин
      - Установка адреса контракта SpaceDex для получение суммы всех цен
    - **Сделано** Вычитание суммы всех цен Space токенов при расчете курса GALT, 30 мин
    - **Сделано** Вычитание баланса SpaceDex при расчете курса GALT, 30 мин
    - **Сделано** Написание тестов, 90 мин

## Common	
* Переместить методы на external где возможно	30 мин
* Добавить копирайты	15 мин
* Пофиксить грамматику в текстах тестов	30 мин
	
## PlotManager	
* Переименовать applyForPlotOwnership => add *Eth	30 мин
* FeeManager role	90 мин
* Gas commission calculation	120 мин
* Депозит газа при подаче заявки на рассмотрение (при submitApplication())	150 мин
* Добавить Validators.getValidatorRoles()	15 мин
* Разборка упаковки в статусе REVERTED только заявителем	30 мин
* Возврат залога заявителем	60 мин
* Получение залога валидатором	90 мин
* Получение вознаграждения валидаторами и galtSpace без указания валюты	60 мин
	
## PlotClarificationManager	
* #claimValidatorDeposit()	90 мин
* #claimApplicantGasDeposit()	120 мин
* Передача токена обратно заявителю #withdrawPackageToken()	90 мин
* Метод revertApplication()	90 мин
* Редактирование полей заявки (сразу всех)	90 мин
	
## PlotCustodianManagement
* Составление спецификации методов и схемы движения статусов	360 мин


## Solidity bot (21 часов) Игорь

### Status
 - Изучить дальнейшие перспективы ботов в мессенджере, 120 мин

### Внедрение контрактов
 - GaltToken
   - Описание моделей методов, 180 мин
   - Описание моделей интерфейса, 180 мин
   - Тестирование интерфейса, 60 мин
 - SpaceToken
   - Описание моделей методов, 180 мин
   - Описание моделей интерфейса, 180 мин
   - Тестирование интерфейса, 60 мин
 - GaltDEX
   - Описание моделей методов, 120 мин
   - Описание моделей интерфейса, 120 мин
   - Тестирование интерфейса, 60 мин

## Технические задачи (13 часов) Игорь
 - Обеспечить ревью кода (600 мин)
 - Настроить мониторинг нод Parity, 180 мин
   - Настроить систему оповещения в telegram

## Контент (11 часов) Игорь
 - Написать статьи отвечающие на вопросы
   - Какими свойствами должен обладать идеальный токен имущественного права? 180 мин
   - Что такое геохеш? 120 мин
   - Преимущества и недостатки стандартов геопозиционирования. 180 мин
 - Обновить видео по обновленному функционалу, 180 мин

## Backlog WebApplication
  - **Сделано** При наличии у встроенного кошелька остаточного баланса - ждать в модальном окне пополнения встроеннго кошелька - поступления этого баланса и предупреждать об этом пользователя(Фикс бага минусового баланса)
  - **Сделано** Обновлять данные в модальном окне пополнения встроенного при сторонних поступлениях эфиров на этот кошелек(если пользователь хочет отправить эфиры вручную или они пришли с прошлого встроеннго кошелька)
  - **Сделано** Сохранение и восстановление выбранного пользователем языка после перезагрузки страницы
  - **Сделано** Подгрузка словарей мультиязычности через AJAX отдельными файлами для масштабируемости
  - **Сделано** Переключатель языка с автоматической заменой всех слов в интерфейсе без перезагрузки
  - **Сделано** Выводить токены SPACE в hex в интерфейсе
  - **Сделано** Сделать директиву для сокращения hex строк в интерфейсе с возможностью скопировать полную версию в буфер обмена
  - Перевести Frontend на новую версию контрактов PlotManager и Validators
    - **Сделано** Расчет необходимого депозита для submit заявки и отправка его вместе с транзанкцией на submit
    - **Сделано** Выводить предупреждение пользователю о том что необходимо дополнительно отправить залог для submit заявки
    - **Сделано** Новая логика фильтрации по lockForReview статусу для пользователя в условиях множества валидаторов у заявки 
    - **Сделано** Валидировать отсутствие статусов pending у всех ролей в заявке для возможности валидатору совершить дальнейшие действия
    - **Сделано** Выводить валидатору предупреждение если у одной из ролей валидации статус pending
    - **Сделано** Админка с указанием ролей и долей в эфирах и галтах по типу заявки
      - **Сделано** Проверять и выводить предупреждение если роли не удалены
      - **Сделано** Удалять роли перед сохранением новых
      - **Сделано** Список-таблица валидаторов с поиском по адресу
    - **Сделано** Добавить в locale мультиязычности все фразы по новому функционалу
    - **Сделано** В админке выводить и задавать цену за газ для залога при submit
    - **Сделано** В админке выводить и задавать долю GaltSpace
    - **Сделано** В админке выводить и задавать метод оплаты заявок
    - **Сделано** На странице создании заявки - давать возможность оплачивать только той валютой, которая указана в методе оплаты контракта
  - **На следующий спринт** Исправить логику закрытия модального окна с встроенным кошельком(при закрытии отправляются транзанкции через МетаМаск)
  - **На следующий спринт** Добавить дополнительную информацию об RPC серверах с возможностью задания через locale
  
  - **На следующий бэклог** Кран ETH: Пункт в меню со страничкой, где пользователь раз в 5 минут может получить 100 ETH
    - Верстка страницы Кран ETH, 60 мин
    - Использование приватника майнера в браузере для отправки транзакции с ETH на адрес пользователя, 60 мин
    - Блокирование по времени: получать эфирки можно только раз в 5 минут, в остальное время кнопка не активна, 60 мин
    
  - **На следующий бэклог** Вывод ошибок в логи в случае провала транзанкции
    - Анализ данных транзанкции, внутреннего кошелька и статуса сервера, 240 мин
      
  - **На следующий спринт** Внедрить простейшую версионность: 
    - Выводить в интерфейсе версию приложения возле надписи Galt Project Global Land Registry
    - Записывать список изменений для каждой версии
    - При нажатии на номер версии - выводить в модальном окне историю изменений с прошлыми версиями

  - **На следующий бэклог** Поиск по карте(по странам, городам и адресам)
  - **На следующий спринт** Поиск по геохешам в Мои участки
  - **На следующий бэклог** При создании заявки - проверять что апроксимированные геохеши не принадлежат ни кому. Если принадлежат - подсвечивать и предупреждать пользователя с блокировкой кнопки создания заявки
  - **На следующий спринт** После создания заявки - блокировать инпуты для изменения границ участка, чтобы пользователь мог добавить геохеши только в уже зафиксированные границы участка
  - **На следующий бэклог** Рядом с транзанкциями показывать сколько на них затрачено газа и эфиров
  
  - **На следующий спринт** Оформить билд скрипты для продакшена
    - Минимизация
    - Обфускация
    - Динамическое имя сбилденного скрипта для избежания проблемы кеширования у пользователя
    - Автоудаление неиспользуемого кода из билда
    
  - **На следующий спринт** Переделать логику по вводу координат: оставлять координаты в инпуте, но строить контур по геохешам
  - **На следующий спринт** Убрать слово "Упаковка" из интерфейса и заменить на "Земельный участок"
  - **На следующий бэклог** Перезагружать интерфейс при измененении кошелька в MetaMask
  - **На следующий спринт** GaltDex: На кнопке Отправить транзанкцию - дополнительно показывать количество транзанкций, которое ему надо будет отправить для обмена(для обмена Galt на ETH нужно две транзакции: approve и transfer)
  - **На следующий бэклог** Перестраивать контур для апроксимации геохешей по часовой или против часовой стрелке если пользователь указал вершины в произвольном порядке
  - **На следующий спринт** При проверке геохешей упаковки - если есть недостающие геохеши: показать их на карте в окне предупреждения выделив цветом среди других геохешей упаковки, 60 мин
  - **На следующий бэклог** Поставить ограничение на максимальный размер геохеша для регистрирования территории чтобы избежать злоупотребления, 30 мин
  - **На следующий бэклог** В интерфейсе проверять площадь указанного пользователем контура и предупреждать в соответствии с площадью - какую точность он может указать, а какая приведет к долгим расчетам., 90 мин
  
  - **На следующий бэклог** Возможность сбросить валидатора владельцем контракта
    - Страница со всеми заявками в статусе закреплена
    - Сброс залоченного валидатора владельцем контракта
    
  - **На следующий спринт** Дополнительно добавление и удаление геохешей с помощью выделения контуром, со оставлением списка геохешей в инпуте как доп фичи
  - **На следующий бэклог** Ловить [Онлайн и Офлайн](https://developer.mozilla.org/en-US/docs/Web/API/NavigatorOnLine/Online_and_offline_events) ивенты для того чтобы блокировать экран и приостанавливать очередь транзанкций 
  - **На следующий спринт** Написать тест который проверяет что набор разных локалей(ru и en) сходится, и если нет - выводить список тех, которые отсутствуют в указанной локали
  
## Backlog Контракты
  - **На следующий бэклог** В PlotManager при добавлении геохешей после возврата заявки - добавлять газ к залогу
  - **Женя: Сделано** В PlotManager дать возможность назначать операторов для валидаторов, чтобы оператор валидатора мог разобрать заявку
  - **Женя: Сделано** В Validators сделать роли ValidatorManager и RolesManager для делегирования прав на управление валидаторами и ролями
  - **На следующий бэклог** Добавить обработку/проверку addGeohashToPackage Что геохеш хотя бы имеет 1 соседа по указанной стороне, и они входят в упаковку


# Sprint 6
## GaltProject UI (Билд + PlotValuation + PlotCustodian = 38.25 часов) (Доработки = 4.75 часов)
  - Оформить билд скрипты для продакшена - 300 минут
    - **Сделано** Минимизация, 60 минут
    - **Сделано** Обфускация, 60 минут
    - **Сделано** Динамическое имя сбилденного скрипта для избежания проблемы кеширования у пользователя, 60 минут
    - **Сделано** Автоудаление неиспользуемого кода из билда, 120 минут
  - PlotValuation - 1320 минут
    - Функционал для пользователя
      - **Сделано** Добавить в меню упаковок функцию для отправки упаковки на оценку
        - Кнопка "Отправить на оценку", 30 минут
        - Модальное окно с вводом списка из ссылок на документы, 60 минут
        - Предупреждение о стоимости услуги, условиях и сроках, 30 минут
        - По нажатию Ок в модальном окне - отправлять транзанкцию для отправки заявки, 30 минут
      - **Сделано** В список заявок пользователя добавить заявки из PlotValuation, 60 минут
      - **Сделано** В списке заявок пользователя ввести категории: к какому контракту относится заявка, 120 минут
      - **Сделано** Добавить фильтр по категориям-контрактам заявок, 60 минут
      - **Сделано** Установить мультиязычность для новых выражений, 60 минут
    - Функционал для валидатора
      - **Сделано** В заявки для валидатора также добавлять заявки из PlotValuation, 60 минут
      - **Сделано** В списке заявок валидатора ввести категории: к какому контракту относится заявка, 60 минут
      - **Сделано** Добавить фильтр по категориям-контрактам заявок, 30 минут
      - **Сделано** Функционал lock, доступен только роле оценщик для контракта PlotValuation, 30 минут
      - **Сделано** Функционал valuatePlot, доступен только роле оценщик, 60 минут
      - **Сделано** Функционал valuatePlot2, доступен только роле контролер - оценщик, 60 минут
      - **Сделано** Функционал approveValuation, доступен только роле аудитор, 30 минут
      - **Сделано** Функционал claimValidatorReward доступен для ролей оценщик, контролер - оценщик и аудитор, 30 минут
      - **Сделано** Установить мультиязычность для новых выражений, 60 минут
  - PlotCustodian - 675 мин
    - Функционал для пользователя
      - **Сделано** Добавить в меню упаковок функцию для отправки упаковки на назначение кастадиана
        - Кнопка "Зарегистрировать участок у Кастодиана", 30 минут
        - Поля для ввода комиссии, 30 минут
        - Выбор кастадиана из списка, 30 минут
	- Указание списка хешей документов, 30 минут
	- Кнопка отправить, 30 мин
      - **Сделано** В список заявок пользователя добавить заявки из PlotCustodian, 60 минут
      - **Сделано** Добавить категорию PlotCustadian для заявок и обозначить в фильтрах, 30 мин
      - **Сделано** При статусе locked в PlotCustadian - показывать кнопку отправить участок на PlotCustodian, 30 мин
      - **Сделано** Модальное окно для отправки участка на PlotCustodian с двумя кнопками
	- Предупреждение о том что нужно сначала заапрувить, 15 мин
	- Кнопка для approve токена участка на контракт PlotCustodian, 30 мин
        - Если approve есть - активна кнопка Ок в модальном окне - отправлять транзанкцию для отправки заявки, 30 минут
      - **Сделано** Установить мультиязычность для новых выражений, 60 минут
    - **Сделано** Функционал для валидатора
      - В заявки для валидатора также добавлять заявки из PlotCustodian, 60 минут
      - Добавить категорию PlotCustadian для заявок и обозначить в фильтрах, 30 мин
      - Функционал lock, доступен только для роли custodian для контракта PlotCustodian, 30 минут
      - Функционал approve, который показан только для заявок в статусе с переданным токеном, 90 минут
      	- Указание списка хешей в модальном окне
      - Установить мультиязычность для новых выражений, 60 минут
  - Доработки, 285 мин
    - **Сделано** Убрать слово "Упаковка" из интерфейса и заменить на "Земельный участок", 15 минут
    - **Сделано** Переделать логику по вводу координат: оставлять координаты в инпуте, но строить контур по геохешам, 30 минут
    - **Сделано** Исправить логику закрытия модального окна с встроенным кошельком(при закрытии отправляются транзанкции через МетаМаск), 60 мин
    - **Сделано** После создания заявки - блокировать инпуты для изменения границ участка, чтобы пользователь мог добавить геохеши только в уже зафиксированные границы участка, 30 минут
    - **Сделано** Поиск по геохешам в Мои участки, 30 минут
    - Дополнительно добавление и удаление геохешей с помощью выделения контуром, с оставлением списка геохешей в инпуте как доп фичи, 120 мин
    
## Backlog WebApplication
  - **Сделано** Сделать более очевидным двухэтапную операцию покупки и продажи Space токена на SpaceDex: модальное окно с approve и sale кнопками
  - **Сделано** Вынести указание контура в отдельный компонент для избежания дублирования и разницы поведения в разных местах указания контура
  - **Сделано** Фабрика контрактов с отдельными классами для каждого контракта для инкапсуляции логики отдельных контрактов и избежания ошибок и повторений при инициализации
  - **Сделано** Абстрактный класс контракта заявок для унификации заявочной системы
  - **Сделано** Записывать и выводить список кастодианов при создании заявки на кастодиана
  - **Сделано** Получение из Plotmanager информации о том что валидатор уже получил награду
  - **Сделано** Reject аудитором заявки в PlotValuation
  - **На следующий спринт** В SpaceDex добавить комиссиию и управление комиссией
  - **На следующий спринт** Переключатель Типа заявок в управлении ролями в Админке
  - **На следующий спринт** Использовать библиотеку из galt-utils для преобразования IPFS хешей в bytes32
  - **На следующий спринт** Добавить валидирование и предупреждение в интерфейс:
    - Один валидатор не может залочить заявку с двух разных ролей
    - Валидатор не может залочить заявку на ту роль, на которую уже залочена заявка
    - Не хватает GALT баланса для покупки
    - В Valuation если цены не сходятся
    - Не все валидаторы заапрувили
  - **На следующий бэклог** Добавить индикатор загрузки:
    - В список заявок пользователя
    - В список заявок валидатора
    - В список земельных участков
  - **На следующий спринт** Внедрить простейшую версионность: 
    - Записывать текущую версию и выводить в интерфейсе версию приложения возле надписи Galt Project Global Land Registry, 30 минут
    - Записывать список изменений для каждой версии, 120 мин
    - При нажатии на номер версии - выводить в модальном окне историю изменений с прошлыми версиями, 120 мин

## Backlog Контракты
  - **На следующий бэклог** В PlotManager при добавлении геохешей после возврата заявки - добавлять газ к залогу
  - **На следующий бэклог** Запись и получение комиссий с Manager-ов разных заявок одним методом для всезх последних заявок, одобренных валидатором
  - **На следующий спринт** В SpaceDex добавить комиссиию и управление комиссией
  - **Женя: Сделано** В SpaceDex добавить поддержку PlotValuation
    - Доработать методы getSpaceTokenPrice и availableForSale
    - Написать тесты
  - **Женя: Сделано** Деплой PlotValuation
  - **Женя: Сделано** Деплой PlotCustodian
  - **Женя: Сделано** Reject аудитором заявки PlotValuation
    
### Backlog SplitMerge
- Добавить обработку/проверку addGeohashToPackage
  - Что геохеш входит в контур упаковки, границы которой заданы многоугольником из прямых линий
    - Разработать стандарт для указания контура
      - Тип сегмента(прямая линия, точка, кривая линия)
      - Доп информация(угол)
    - При сохранении контура - определять углы между линиями и так-же сохранять их
    - При сохранении контура - конвертировать геохеши в координаты и также сохранять их
    - Функция для определения того, что две прямые пересекаются
    - Функция определения того, что точка находится в пределах контура
    - Функция определения того, что геохеш со своими краями-точками находится в пределах контура
      - Перебор краёв геохеша с определением его координат
      - Построение 4-х произвольных прямых из краёв геохеша для определения пересечения с прямой контура
      - Перебор прямых контура с определением для каждой: пересекаются ли прямые выходящие из вершин геохеша с каждой из прямой
    - Написать тесты

## Контент - 10 часов - Игорь
 - Обновить видео по функционалу - 240 мин
 - Подготовить титры на русском - 120 мин
   - Расставить по этапам в youtube
 - Инфографика, скетчи к статьям - 240 мин

## Бот - 12 часов - Игорь
 - Написание архитектуры (документация) - 240 мин
   - Конфигурация, входящие данные
   - Описание работы ботов-тестов для моделирования
     - Примеры сценариев
   - Результаты, их визуализация в Explorer и графиках (временная шкала)
 - Интегрировать CLI (api-provider) для использования в тестах - 240 мин
 - Реализовать эксперимент, используя предположение по эмиссии
   - Реализовать вызовы методов (для оперирования участками) - 240 мин

## Explorer - 2 часа - Игорь
 - Интеграция с менеджером событий - 120 мин
   - Показ участков и их статусов в реальном времени

## Технические задачи - 10 часов 15 мин - Игорь
 - Осуществить ревью кода - 10 часов
 - Мониторинг нод Parity
   - Добавить информирование по условию
     - Возможность сделать balanceOf() - 15 мин
     
## Common - 4.5 ч - Никита
* Добавить фичу Pausable (приостановки работы) в каждый контракт - 120 мин
* Прогнать контракты на static analysis tools, исправить возможные ошибки. После того, как все контракты будут готовы - 150 мин

## PlotValuation - 4ч - Никита
* Доделать тесты - 240 мин
	
## PlotCustodianManagement - 12ч - Никита
* Заявка по привязке кастодиана к упаковке (код solidity + тесты)	 - 480 мин
* Заявка по удалению кастоодиана из упаковки (скопировать логику добавления с изменениями / код solidity + тесты)	- 240 мин
	
## PlotManager - 9.5ч - Никита
* Метод оценки разрядности геохеша - возвращает uint длину от 1 до 12 - 180 мин
* Вынести в библиотеку логику #addGeohashesToApplication() - 180 мин
* Добавить счетчик веса каждого геохеша в зависимости от его разряда, веса прописаны для каждого разряда константами в коде контракта - 120 мин
* Оплачивать разницу в залогах при повторной подаче заявки - 90 мин

## Бэклог - Никита
* Убрать оплату из appForPlotOwnership() / оставить только fee при submitApplication() - 240 мин

# Sprint 7
## GaltProject UI, 18.25 часов
  - **Сделано** В SpaceDex добавить комиссиию и управление комиссией
    - Новая панель для SpaceDex на странице админки, 30 мин
    - Просмотр и редактирование комиссии в админке, 30 мин
    - Просмотр балансов Space и Galt, а также сумму цен Space на продаже в админке, 30 мин
    - Получение процента комиссии и актуализация цен в SpaceDex с учетом комиссии, 60 мин
    - Предупреждение пользователю на каждой панеле о величине комиссии, 30 мин
    - Совершение операций купли-продажи с учетом комиссии, 30 мин
    - Установить выражения для мультиязычности, 60 мин
  - **Сделано** Переключатель Типа заявок в управлении ролями в Админке
    - Select с типами заявок, 30 мин
    - При переключении Select - подгружать в таблицу новые типы, 30 мин
    - Редактирование ролей применительно к текущему выбранному типу, 30 мин
  - **Сделано** Использовать библиотеку из galt-utils для преобразования IPFS хешей в bytes32, 60 мин
  - **Сделано** Добавить валидирование и предупреждение в интерфейс:
    - Один валидатор не может залочить заявку с двух разных ролей, 30 мин
    - Валидатор не может залочить заявку на ту роль, на которую уже залочена заявка, 30 мин
    - Не хватает GALT баланса для покупки на SpaceDex, 30 мин
    - В Valuation если цены не сходятся, 30 мин
    - Не все валидаторы заапрувили для получения награды, 30 мин
    - В GaltDex если баланса GaltDex недостаточно для обмена, 30 мин
  - **Сделано** Внедрить простейшую версионность: 
    - Записывать текущую версию в package.json и выводить в интерфейсе версию приложения возле надписи Galt Project Global Land Registry, 30 минут
    - Записывать список изменений для каждой версии в CHANGELOG.MD, рендерить в HTML с помощью Webpack и ложить в папку со статикой, 180 мин
    - При нажатии на номер версии - выводить в модальном окне историю изменений с прошлыми версиями, 120 мин
  - **Сделано** Миграция на новую версию PlotManager
    - Выпиливание оплаты из applyForPlotOwnership, 30 мин
    - Получать и платить динамическую комиссию(getSubmissionFee) за заявку на основе наибольшего геохеша в SubmitApplication, 60 мин
    - Задание в админке submissionGaltFeeRate и submissionEthFeeRate, 30 мин
    - Выпиливание из админки статической комиссии, 15 мин
    - Переделать деплой под новую версию, 30 мин
    
## Контракты: Евгений, 4 часа
  - **Сделано** В SpaceDex добавить комиссиию и управление комиссией
    - setFee: установка комиссии в %, 15 минут
    - getGaltFeeForAmount: метод для получения комиссии, которую необходимо заплатить для операции, 30 мин
    - exchangeSpaceToGalt: выдавать пользователю меньше GALT с учетом комиссии, сохранять сумму комиссии в galtFeePayout и galtFeeTotalPayout, 30 мин
    - exchangeGaltToSpace: принимать от пользователя больше GALT для покупки Space, сохранять сумму комиссии в galtFeePayout и galtFeeTotalPayout, 30 мин
    - withdrawGaltFee: вывод комиссии, 15 мин
    - написать тесты, 120 мин
    
## Backlog WebApplication
  - **Сделано** SpaceDex история операций в админке
  - **Сделано** Проверять на то, что у пользователя хватает GALT при попытке заплатить за новую заявку с помощью GALT
  - **Сделано** Добавить help информацию при оплате комиссии
  - **Сделано** Миграция на новую версию PlotManager
    - Для заявок в статусе REVERT вызывать resubmit вместо submit
    - При resubmit указывать и платить комиссию
  - Вынести класс EthContract в отдельное репо
  - Вынести API для использования Worker-ов в отдельное репо
  - Вынести Worker для транзанкций в отдельное репо
  - Адаптивка для смартфонов и планшетов
  - Дополнительный функционал PlotEscrow в интерфейсе
    - Дополнительный функционал для Продажи на PlotEscrow
      - Для ордеров со статусом OPEN - кнопка "Отменить ордер"
      - Обновить карточку после подтверждения транзанкции
      - Для ордеров со статусом CANCELED - кнопка "Открыть ордер заново"
      - Кнопка для отзыва токена продавцом
    - Дополнительный функционал для Продажи на PlotEscrow
      - Кнопка для отзыва платежа покупателем
      - Кнопка для отмены оффера покупателем
      - Кнопка для запроса отмены аудита
    - Страница Валидирование
      - Отображать заявки из PlotEscrow, доступные для валидирования
      - ???
      
  - Разбиение упаковок отнятием контура, 18 часов
    - Проверка на вхождение геохеша в упаковку на основе пересечения луча и контура, 360 мин
    - Фунцкция "Отнять контур" в интерфейсе
      - Кнопка под каждой упаковкой в Моих участках, 15 мин
      - Страница, где подсвечивается текущий контур, и лежат инпуты для указания нового контура, 30 мин
      - Одновременная отрисовка двух контуров разных цветов, 60 мин
      - Подсвечивание геохешей, которые отнимутся в результате отнятия контура, 60 мин
      - Инпут для указания точности аппрокисмации, по геохешам которые войдут в новый контур, 15 мин
      - После подтверждения отнятия контура - нахождение и разбиение нужных геохешей для сплит участков, 60 мин
      - Выделение существующих геохешей из массва, включая родителей разбитых геохешей для отделения от существующей упаковки, 60 мин
      - Создание серии транзанкций для отделения нужных геохешей для вывода из упаковки, 60 мин
      - Определение того - какие геохеши нужно разбить и до какого уровня, формирование последовательного списка геохешей для разбития, 90 мин
      - Создание серии транзанкций для разбиения отделенных геохешей, которые необходимы для аппроксимации, 60 мин
      - Создание серии транзанкций по возвращению в исходную упаковку геохешей которые не входят в отнимаемый контур, 60 мин
      - Транзанкция для создания новой упаковки, 15 мин
      - Создание серии транзанкций по добавлению в новую упаковку геоехешей которые входят в отнимаемый контур, 60 мин
  - Перемещение оставшихся геохешей из одной упаковки в другую при незаконченной операции разбиения
  - **Сделано** Добавить индикатор загрузки и количество найденных айтемов:
    - В список заявок пользователя
    - В список заявок валидатора
    - В список земельных участков
  - При проверке геохешей упаковки - если есть недостающие геохеши: показать их на карте в окне предупреждения выделив цветом среди других геохешей упаковки, 60 мин
  - Написать тест который проверяет что набор разных локалей(ru и en) сходится, и если нет - выводить список тех, которые отсутствуют в указанной локали, 90 мин
  - GaltDex: На кнопке Отправить транзанкцию - дополнительно показывать количество транзанкций, которое ему надо будет отправить для обмена(для обмена Galt на ETH нужно две транзакции: approve и transfer), 30 мин
    - Добавить дополнительную информацию об RPC серверах с возможностью задания через locale, 60 мин
  - Кран ETH: Пункт в меню со страничкой, где пользователь раз в 5 минут может получить 100 ETH
    - Верстка страницы Кран ETH, 60 мин
    - Использование приватника майнера в браузере для отправки транзакции с ETH на адрес пользователя, 60 мин
    - Блокирование по времени: получать эфирки можно только раз в 5 минут, в остальное время кнопка не активна, 60 мин
  - Вывод ошибок в логи в случае провала транзанкции
      - Анализ данных транзанкции, внутреннего кошелька и статуса сервера, 240 мин
  - Поиск по карте(по странам, городам и адресам)
  - Рядом с транзанкциями показывать сколько на них затрачено газа и эфиров
  - Перестраивать контур для апроксимации геохешей по часовой или против часовой стрелке если пользователь указал вершины в произвольном порядке
  - Поставить ограничение на максимальный размер геохеша для регистрирования территории чтобы избежать злоупотребления, 30 мин
  - В интерфейсе проверять площадь указанного пользователем контура и предупреждать в соответствии с площадью - какую точность он может указать, а какая приведет к долгим расчетам., 90 мин
  - Возможность сбросить валидатора владельцем контракта
    - Страница со всеми заявками в статусе закреплена
    - Сброс залоченного валидатора владельцем контракта
  - При создании заявки - проверять что апроксимированные геохеши не принадлежат ни кому. Если принадлежат - подсвечивать и предупреждать пользователя с блокировкой кнопки создания заявки
  - Дополнительно добавление и удаление геохешей с помощью выделения контуром, со оставлением списка геохешей в инпуте как доп фичи
  - Ловить [Онлайн и Офлайн](https://developer.mozilla.org/en-US/docs/Web/API/NavigatorOnLine/Online_and_offline_events) ивенты для того чтобы блокировать экран и приостанавливать очередь транзанкций 

## PlotEscrow - Никита - 32

* Оценка PlotEscrow - 360 мин
* Базовый функционал на основе абстрактного контракта (модификаторы настроек контракта) - 150 мин
* #openSale() - создаем заявку на продажу - 180 мин
* #createOffer() - создает ответ на продажу. Отношения заявка-оффер - 180 мин
* #changeOfferBid()	- 120 мин
* #changeOfferAsk()	- 120 мин
* #selectOffer() - продавец выбирает оффер с которым будет работать - 90 мин
* #attachSpaceToken() - 120 мин
* #attachPayment() - 120 мин
* #resolve() - 120 мин
* #cancelOffer() - 120 мин
* #requestCancellationAudit() - 120 мин
* #lockForaudit() - 120 мин

## Backlog Контракты
  - В PlotManager при добавлении геохешей после возврата заявки - добавлять газ к залогу
  - Запись и получение комиссий с Manager-ов одним методом для всех последних заявок, одобренных валидатором
  - В Validators сделать динамический массив доступных для lock заявок по разным заявочным контрактам
  - В PlotValuation и SpaceDex добавить возможность использования кастомных токенов(например DAI), не только GALT

# Sprint 8
## GaltProject UI
  - PlotEscrow в интерфейсе, 24 часа
    - **Сделано** Создать и подключить класс для PlotEscrow контракта, 60 мин
    - Выставление на продажу
      - **Сделано** В Моих участках в меню каждого участка - кнопка Выставить на продажу, 15 мин
      - **Сделано** Модальное окно для указания желаемой цены и инфо об условиях работы PlotEscrow, 60 мин
      - **Сделано** Оплата комиссии в модальном окне 60 мин
    - Страница Продажа на PlotEscrow
      - **Сделано** Создать компонент, 15 мин
      - **Сделано** Получение списка ордеров на продаже, 30 мин
      - Фильтр по статусам, 60 мин
      - **Сделано** Получение списка офферов для каждого ордера, 60 мин
      - Вывод информации по каждому ордеру и списка офферов для каждого оффера, 90 мин
      - Для заявки со статусом OPEN и офферов с НЕ указанной ценой продавцом и статусом OPEN кнопка "Ответить на предложение", модальное окно для указания цены, 60 мин
      - Для заявки со статусом OPEN и офферов с указанной ценой продавцом и совпадающими ценами и статусом OPEN кнопка "Согласиться на предложение", 30 мин
      - Для заявки со статусом OPEN и офферов с указанной ценой продавцом и НЕ совпадающими ценами и статусом OPEN предупреждение "Для того чтобы согласиться на предложение - цены должны быть равны", 30 мин
      - Для заявки со статусом OPEN и офферов с указанной ценой продавцом и НЕ совпадающими ценами и статусом OPEN кнопка "Изменить цену ответа", модальное окно для указания цены, 60 мин
      - Обновить карточку после подтверждения транзанкции, 15 мин
      - Для офферов со статусом MATCH кнопка "Прикрепить токен", 30 мин
      - Обновить карточку после подтверждения транзанкции, 15 мин
      - Для офферов со статусом ESCROW кнопка "Подтвердить обмен", 30 мин
      - Обновить карточку после подтверждения транзанкции, 15 мин
      - Для офферов со статусом RESOLVED кнопка "Получить оплату", 30 мин
      - Обновить карточку после подтверждения транзанкции, 15 мин
      - Мультиязычность для всех выражений, 90 мин
    - Страница Покупка на PlotEscrow
      - **Сделано** Создать компонент, 15 мин
      - Получение списка доступных для покупки ордеров, 30 мин
      - Получение списка ордеров, на которые пользователь подавал оффер, 30 мин
      - Фильтр по статусам, 60 мин
      - Для каждого ордера выводить список офферов, 60 мин
      - Выделять среди офферов тот, что подал пользователь, 30 мин
      - Для ордеров со статусом OPEN - кнопка "Предложить цену", модальное окно с указанием цены, 60 мин
      - После подтверждения транзанкции - обновление карточки и предупреждение о том что продавец должен ответить на ваш оффер, 30 мин
      - При ответе от продавца и совпадении цен - предупреждение о том что продавец должен согласиться на предложение, 30 мин
      - Для офферов со статусом LOCKED - кнопка "Прикрепить оплату", 30 мин
      - Обновить карточку после подтверждения транзанкции, 15 мин
      - Для офферов со статусом ESCROW - кнопка "Подвердить обмен", 30 мин
      - Обновить карточку после подтверждения транзанкции, 15 мин
      - Для офферов со статусом RESOLVED кнопка "Получить участок", 30 мин
      - Обновить карточку после подтверждения транзанкции, 15 мин
      - Мультиязычность для всех выражений, 90 мин
      
  - Алгоритм для разбиения контура с геохешами на два контура, 6 часов
    - Отнятие одного контура от другого с помощью библиотеки https://github.com/mikolalysenko/overlay-pslg, 60 мин
    - Разбиение с указанной точностью геохешей в рамках отнятого контура, 120 мин
    - Перенос из массива в новый массив геохешей, которые принадлежат новому контуру, 60 мин
    - Объединение геохешей если это возможно для нового контура, 60 мин
    - Обьединение геохешей если это возможно в старом контуре, 60 мин


## PlotEscrow	 - Никита 32ч
* #cancellationAuditReject() - 90 мин
* #cancellationAuditApprove() - 90 мин
* #withdrawPayment() - buyer claims payment back - 120 мин
* #claimPayment() - seller claims payment - 120 мин
* #withdrawSpaceToken() - seller claims token - 120 мин
* #claimSpaceToken() - buyer claims token - 120 мин
* #cancelSale() - seller cancels OPEN sale - 90 мин
* #reopenSaleOrder() EMPTY => OPEN sale - 90 мин
* #claimGaltSpace Reward - 120 мин
* #claimAuditor Reward - 120 мин
* Отправка токена к кастодиану на валидацию - 150 мин
* Модификация контракта PlotCustodianManager для приема токенов не от владельца - 180 мин
* Ревью и модификация документации PlotManager (без правок кода). Составляется список работ по фиксам контракта на следующем спринте - 360 мин
* Автоматизированная сборка всех .sol файлов в один файл (для дебага в remix, заливки когда на etherscan и скармливания в static analysis tools) - 180 мин

## Контент - 10 часов 30 мин - Игорь
 - Добавить видео по новому функционалу (с английским интерфейсом)
   - PlotValuating - 120 мин
   - PlotCustodian - 120 мин
   - SpaceDex - 120 мин
 - Подготовить титры к видео по новому функционалу - 120 мин
 - Статья в блог ( по релизу ) - 120 мин
   - Добавить изображения, скриншоты - 30 мин

## Блог - 30 мин - Игорь
 - Установить и/или переделать стиль темы, похожей на medium - 30 мин

## Документация - 8 часов - Игорь
 - Скорректировать документацию, привести в актуальное состояние
   - PlotManager - 8 часов

## Технические задачи - 14 часов - Игорь
 - Подготовка к релизу
   - Осуществить ревью кода, фиксация результатов - 10 часов
   - Провести тестирование перед релизом - 240 мин


   
   
   
