## Данные PropertyMarker Order

Состав ордера при создании:
- Массив Space токенов
- Массив `bytes32` документов 
- Описание (`description`)
- Ключевые слова (`keywords`)
- Оператор - тот кто может выполнять все операции с ордером помимо создателя ордера
- Валюта и первоначальная цена лота

Каждый Space токен имеет свой ipld хеш с записанными по нему данными, которые отображаются в краткой и полной карточке ордера.

Если по какому-то из Space токенов не удается получить данные из ipld - информация по нему исключается из карточек ордера.

Если не удается получить данные из ipld по всем Space токенам ордера - ордер исключается из выдачи в каталоге.

## Space токены ордера

**Первый Space токен** в массиве определяет часть информации в краткой карточке ордера:
![image](https://user-images.githubusercontent.com/4842007/62417507-c2e67480-b651-11e9-86ae-2f3f10031ce1.png)

Соотвественно следующие данные из **первого Space токена** отображаются в краткой карточке ордера:
- Тип, подтип
- Регион, адрес
- Площадь в квадратных метрах
- Цена за квадратный метра вычисляется исходя из площади **первого Space токена**

Количество ванных и спален для краткой карточки ордера берется в сумме от всех токенов ордера имеющих ванны и спальни.

При создании пользователь должен выбрать **первый Space токен** правильно, если он сделает неверный выбор - карточка ордера
будет отображать не соответствующую информацию, как например: при выборе [Land, House - Villa] Land токен станет основным, так как он первый, в краткой карточке будет отображаться информация о земельном участке, его площадь, цена за квадратный метр исходя из этой площади. Однако количество спален и ванных будет отображаться в сумме от всех токенов имеющих спальни и ванные. Вилла будет отображаться в дополнительных токенах( +House Villa ).

Если пытаться вычислить основной Space токен автоматически, не полагаясь на **первый Space токен** выбранный пользователем - то
информация отображаемая в каталоге будет неоднозначна, а поведение выбора основного токена не очевидно для пользователя.
К тому-же пользователь может наоборот сделать Land основным токеном, а дом на нем - дополнительным.

Если пользователь составил неправильный порядок токенов при создании ордера - он может отменить этот ордер и создать 
новый с правильным **первым Space токеном**.

Дополнительные Space токены показываются:
- в краткой карточке ордера групируясь по типам
- в полной карточке в начале страницы списком с кратким перечислением опций(вместе с первым)
- в полной карточке под описанием ордера и первого Space токена с полным перечислением опций

В полной карточке при перечислении Space токенов ордера - необходимо добавлять их ID со ссылкой на страницу Space 
токена.

## Медиа файлы ордера
Перечисляемые файлы собираются со всех Space токенов ордера в общие массивы:
- Фотографии
- Планы зданий

Если в результате сбора со всех Space токенов массив медиа файлов оказался пустым - то соответствующая вкладка 
(Фотографии или Планы зданий) будет скрыта.

Если массив фотографий оказался пустым - то в краткой карточке будут отображаться планы зданий.

3D модели и Cloud points должны иметь один и тот же ipfs хеш в ipld Space токенов ордера. Если это не так - отображаться будет первый попавшийся по порядку массива Space токенов в ордере.

## Кастадианы
Кастадианы собираются со всех Space токенов в один массив для показа в полной карточке обьекта.

Если какой-то из кастадианов не привязан к какому-то из Space токенов ордера - необходимо вывести подтверждение об этом чтобы исключить возможность мошейничества.

## Вопросы
- Как и где отображаются видео файлы среди медиа файлов ордера? - после фотографий в конце, протестируем, поменяем.
- Каким образом будем показывать Street View? - надо решить, примерно как у трулии

## TODO:
- Переделать `documents` в ipld с полями: `description`, `keywords`, `documents`
- Болванка для ордера без фото и планов
- Нужно продумать вид Space токенов в ордере по которым не удалось получить ipld данные
