# Голосование за Делегатов - Требования

## Описание проблемы
Необходимо обеспечить справедливое голосование участников проекта, обладающих репутацией, за кандидатов в том фонде, где они получили право стать кандидатом в делегаты.

## Цели контракта
- Обеспечить механизм становления кандидата делегатом
- Дать возможность пользователям влиять на выбор делегата своей репутацией
- В итоге выбирать список из 7 кандидатов которые получают наибольшие суммы репутации

## Основные требования:
- Обеспечить корректную работу в условиях наличия нескольких смежных фондов: на каждый фонд нужно свое голосование.
- Если список кандидатов меньше 7, то считать голосование неудавшимся и не назначать делегатов.

## Сценарий контракта
### Сценарий 1: Выборы кандидатов
1. В течении 27 дней пользователи голосуют за кандидатов в делегаты.
Маппинг адреса голосующего к адресу кандидата:
| Номер Раунда | Адрес пользователя | Адрес кандидата |
| ---------- | -------------- | --------------- |
| 0 | 0x477...b65 | 0x466...n12 |
| 0 | 0x477...h23 | 0x466...n12 |
| 0 | 0x477...89j | 0x477...lol |

Маппинг адреса кандидата к сумме репутаций голосующих
| Номер Раунда | Адрес кандидата | Сумма репутаций |
| ---------- | -------------- | --------------- |
| 0 | 0x466...n12 | 1000 |
| 0 | 0x488...123 | 500 |
| 0 | 0x477...lol | 700 |

2. На 28 день - в течении дня кандидаты в делегаты должны зафиксировать свои результаты отправив транзанкции, голосовать в этот день уже нельзя.
Результат выполнения функции фиксирования своих результатов от нескольких делегатов на основе маппинга адресов кандидатов к сумме репутаций голосующих:
| Номер Раунда | Место в топе кандидатов | Адрес кандидата |
| ---------- | -------------- | --------------- |
| 0 | 1 | 0x466...n12 |
| 0 | 2 | 0x477...lol |
| 0 | 3 | 0x488...123 |
| 0 | 4 | 0x499...345 |
| 0 | 5 | 0x400...678 |
| 0 | 6 | 0x411...910 |
| 0 | 7 | 0x422...160 |

3. После 28 дней, по окончании раунда голосования - любой может выполнить транзанкцию finishVoting, чтобы результаты голосования сохранились как новый список делегатов.
Пример сохранения результата голосования в виде массива:
[0x466...n12, 0x477...lol, 0x488...123, 0x499...345, 0x400...678, 0x411...910, 0x422...160]
4. В это же время, после окончания раунда в 28 дней - начинается новый раунд и идет независимо от того - успели зафиксировать результаты прошлого раунда или нет
См. пример в п.1

## Особенности реализации на Solidity

## Особенности реализации на TypeScript

## Неоднозначные вопросы и ответы на них
- Период контракта Голосования тесно соприкасается с периодом ManagmentFee, в нем тоже за 28 дней выдается оплата делегатам, но в первый день 28-дневного периода фиксируется список кандидатов, чтобы в конце периода выплатить делегатам их заработную плату. Нужно ли периоды этих двух контрактов явно синхронизировать, чтобы эти 28-ми дневные периоды проходили одновременно?
- Есть потребность в голосовании за делегатов частью своей репутации, чтобы свою репутацию можно было распределить среди нескольких кандидатов. Возможно ли это на Solidity?
- Если пользователь 1 после голосования своей репутацией - передал пользователю 2 свой участок с репутацией, то пользователь 2 может той же репутацией проголосовать за того-же кандидата, но значение голосов у него увеличится. Примерно таже ситуация и с арендой участков.