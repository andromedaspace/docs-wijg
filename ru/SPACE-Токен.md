# Space Токен - Описание

## Описание проблемы
Проекту необходим ERC721 контракт для учета собственности на территории фондов. Контракт должен оперировать [геохешами](https://www.movable-type.co.uk/scripts/geohash.html) и обеспечивать возможность паралельной работы вместе с залоченными GALT токенами за каждым из геохешей.

## Цели контракта
- Создать отвечающий стандартам ERC721 токен с дополнительными функциями, связанными с оперированием залоченными GALT токенами за каждым SPACE токеном.
- Обеспечить хранение нижней и верхней границы высоты за каждым SPACE токеном

## Сценарий контракта
### Сценарий 1: Первичная продажа SPACE токена
1. После успешной продажи SPACE токена своему первому владельцу - аукцион вызывает функцию transferFrom передавая последним аргументом цену продажи.
2. Цена продажи передается в DaoRegistry.onTransferReputationWithinDao и будет использоваться как репутация SPACE токена.
3. Токен успешно передан владельцу и за ним залочились GALT токены в размере цены его продажи.
### Сценарий 2: Передача SPACE токена другому владельцу
1. При передачи другому владельцу так-же вызывается transferFrom, но последний аргумент reputation не разрешено указывать, так как эту функцию вызывает не аукцион.
2. Функция transferFrom инициирует функцию DaoRegistry.onTransferReputationWithinDao, которая обеспечивает перечисление залоченных GALT токенов(репутации) от одного владельца другому
3. Таким образом при передачи SPACE токена так-же передается и его репутация: у старого владельца отнимается, и начисляется новому владельцу.

## Спецификация контракта
### Модификации
- Добавлено поле daoRegistry и функция setDaoRegistry чтобы при совершении операций со SPACE токеном - производились соответствующие операции с залоченными токенами GALT за соответствующим SPACE токеном.
- Функция transferFrom переопределена для добавления аргумента reputation, который можно указывать только при первичной продаже токенов чтобы зафиксировать c помощью контракта DaoRegistry сколько за этим SPACE токеном будет числиться репутации.
- Добавлен маппинг landSpaces для хранения нижней и верхней границы высоты и функции для управления ими.

## Особенности реализации на Solidity

## Особенности реализации на TypeScript

## Неоднозначные вопросы и ответы на них
- Каким образом можно будет пополнять залоченные токены GALT? Из какого контракта это будет происходить?
- Каким образом и из какого контракта будут производится штрафы из баланса залоченных GALT токенов?