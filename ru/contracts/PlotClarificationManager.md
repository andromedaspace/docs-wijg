# PlotClarificationManager - Требования

### Сценарий №1: Уточнение геохешей участка - Не реализовано

0. Вводим тип заявки - Уточнение геохешей.

1. У пользователя в меню Мои участки в контекстном меню по операциям с участком отображается кнопка `Уточнить геохеши участка`.

2. Если пользователь нажал кнопку, то появляется меню для ввода данных по заявке аналогично созданию новой заявки: кадастровый номер, страна, полное имя и номер документа, точность апроксимации. Пользователь нажимает Создать. Создается транзакция с вызовом метода контракта PlotManager, который создает заявку со статусом Новая и передает токен Участка контракту PlotManager.

3. Пользователь заходит в меню Мои заявки. В меню заявки выбирает пункт "Проверить геохеши". Строится апроксимация по точности, указанной в заявке и создается серия транзакций с вызовом метода контракта PlotManager. Метод создает новые геохеши (или используется уже существующие) и добавляет их в заявку.

4. Пользователь нажимает Отправить заявку на рассмотрение, создается транзакция и статус заявки меняется на Отправлена на рассмотрение.

5. Валидатор или Валидаторы назначают себе заявку аналогично созданию нового Участка.

6. После того, как все Валидаторы утвердили заявку последняя транзакция меняет статус Заявки на "Одобрена к уточнению".

7. Пользователь в меню работы с заявкой Нажимает кнопку `Добавить все геохеши в участок`.  Эта кнопка видна только у заявок со статусом Одобрена к уточнению. Создается серия транзакций по добавлению геохешей в Упаковку. Упаковка и Геохеши принадлежат PlotManager.

8. Создается транзакция, которая передает токен Участка обратно пользователю. Статус заявки меняется на "Уточнение произведено".

9. Валидатор может забрать свою награду и изменить статус Заявки `Получено вознаграждение валидатора`.

10. Адрес получателя комиссии может забрать свою комиссию и изменить статус на Закрыта.

11. Если один из Валидаторов отклоняет заявку, то статус заявки меняется на Отклонена, токен участка передается пользователю.

12. Валидатор может вернуть заявку на доработку аналогично заявке на создание нового участка. 

13. Пользователь в меню действий по заявке может нажать кнопку `Вернуть участок`. Эта кнопка отображается для заявок со статусом Новая, Возвращена. При ее нажатии создается транзакция, которая возвращает токен Участка пользователю и меняет статус на Разобрана заявителем.

14. Для валидатора для заявок со статусом Утверждена, Отклонена, Разобрана заявителем отображается кнопка Получить вознаграждение.
