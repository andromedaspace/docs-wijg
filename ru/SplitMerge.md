# Контракт SplitMerge

## Описание проблемы
- Разделение и объединение земель;

## Цели контракта
- У пользователя должна быть возможность объединять и разделять свои земли;

## Сценарий контракта
### Сценарий 1: Разделение земель
Пользователь А вводные:

| Адрес пользователя | Земли (Space) | Репутация |
| ---------- | --------------- | ------- |
| 0x477...b65 | sezu01 | 500 |

1. Пользователь А хочет разделить sezu01. 
2. Вызывается метод splitSpace контракта Controller с аргументом sezu01.
3. Controller вызывает метод Split контракта Land с аргументом sezu01. 
4. Split возвращает массив из 32 дочерних элементов (sezu010, sezu011, sezu012 и т.д.) основываясь на родительском ( sezu01 ).
5. Controller разделяет репутацию родительского геохэша на 32 части используя метод splitReputation контракта репутации при этом начисляя 1/32 репутации на каждый переданный геохэш. 
6. Выполняется трансфер родительского геохэша от Пользователя А на адрес мультисига. 
7. В цикле проверяется, созданы ли дочерние геохэши и если нет, то происходит mint Space токена с заданным ID в виде дочернего геохэша и трансфер токена Пользователю А:

Пользователь А после выполнения сплита:

| Адрес пользователя | Земли (Space) | Репутация |
| ---------- | --------------- | ------- |
| 0x477...b65 | sezu010 | 15,625 |
| 0x477...b65 | sezu011 | 15,625 |
| 0x477...b65 | sezu012 | 15,625 |
| 0x477...b65 | sezu013 | 15,625 |
| 0x477...b65 | sezu014 | 15,625 |
| 0x477...b65 | sezu015 | 15,625 |
| 0x477...b65 | Остальные Space токены | 406,25 |

### Сценарий 2: Объединение земель
Пользователь Б вводные:

| Адрес пользователя | Земли (Space) | Репутация |
| ---------- | --------------- | ------- |
| 0x112...fc1 | sezu0b0 | 15,625 |
| 0x112...fc1 | sezu0b1 | 15,625 |
| 0x112...fc1 | sezu0b2 | 15,625 |
| 0x112...fc1 | sezu0b3 | 15,625 |
| 0x112...fc1 | sezu0b4 | 15,625 |
| 0x112...fc1 | sezu0b5 | 15,625 |
| 0x112...fc1 | Остальные Space токены | 406,25 |

1. Пользователь Б хочет объединить свои участки.
2. Пользователь вызывает метод mergeSpaces контракта Controller передавая список геохэшей для объединения в виде строки с разделителем.
3. Строка участков преобразуется в массив. Для каждого дочернего элемента, принадлежащему выбранному для объединения родителю выполняется трансфер на multisig.
4. Репутация из дочерних участков объединяется и передается родительскому участку.
5. Выполняется трансфер родительского участка ( sezu0b ) с multisig на адрес Пользователя Б.

Пользователь Б после выполнения мержа:

| Адрес пользователя | Земли (Space) | Репутация |
| ---------- | --------------- | ------- |
| 0x112...fc1 | sezu0b | 500 |

